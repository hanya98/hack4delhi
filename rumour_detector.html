<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delhi Rumour Detector & Policy Bot | JanSetu</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:"Segoe UI", sans-serif; }
        body { display:flex; min-height:100vh; background:#f0f2f5; }
        .sidebar { width:260px; background:#1a3a5a; color:#fff; padding:25px 15px; position:fixed; height:100vh; z-index:100; }
        .sidebar h2 { text-align:center; margin-bottom:40px; font-size:20px; color:#ecf0f1; border-bottom:1px solid #2c527a; padding-bottom:15px; }
        .nav-group { margin-bottom:25px; }
        .nav-label { font-size:11px; text-transform:uppercase; color:#8ba3b8; margin-left:10px; margin-bottom:10px; display:block; }
        .nav-item { padding:12px 15px; margin-bottom:5px; border-radius:8px; cursor:pointer; display:block; text-decoration:none; color:white; font-size:14px; transition:0.2s; }
        .nav-item:hover { background:#2c527a; }
        .active-nav { background:#2c527a; border-left:4px solid #3498db; }
        .main { flex:1; margin-left:260px; padding:30px; max-width:100%; }
        .header { margin-bottom:30px; }
        .header h1 { color:#2c3e50; margin-bottom:10px; }
        .header p { color:#666; font-size:14px; }
        .chat-container { background:white; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06); display:flex; flex-direction:column; height:600px; max-width:800px; border:1px solid #e0e6ed; }
        .chat-header { background:#3498db; color:white; padding:20px; border-radius:12px 12px 0 0; display:flex; align-items:center; gap:10px; }
        .status-indicator { width:8px; height:8px; background:#2ecc71; border-radius:50%; animation:pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity:1; } 50% { opacity:0.5; } }
        .messages { flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:12px; }
        .message { display:flex; gap:10px; margin-bottom:10px; }
        .message.user { justify-content:flex-end; }
        .message-content { max-width:70%; padding:12px 16px; border-radius:8px; word-wrap:break-word; line-height:1.4; font-size:14px; }
        .message.bot .message-content { background:#ecf0f1; color:#2c3e50; }
        .message.user .message-content { background:#3498db; color:white; }
        .typing-indicator { display:flex; gap:4px; align-items:center; padding:12px 16px; background:#ecf0f1; border-radius:8px; width:fit-content; }
        .typing-dot { width:6px; height:6px; background:#999; border-radius:50%; animation:typing 1.4s infinite; }
        .typing-dot:nth-child(2) { animation-delay:0.2s; }
        .typing-dot:nth-child(3) { animation-delay:0.4s; }
        @keyframes typing { 0%, 60%, 100% { opacity:0.3; } 30% { opacity:1; } }
        .input-area { border-top:1px solid #e0e6ed; padding:15px; display:flex; gap:10px; align-items:flex-end; }
        #userInput { flex:1; padding:10px 15px; border:1px solid #ddd; border-radius:6px; font-size:14px; resize:none; max-height:100px; font-family:"Segoe UI", sans-serif; outline:none; }
        #userInput:focus { border-color:#3498db; box-shadow:0 0 0 3px rgba(52, 152, 219, 0.1); }
        .send-btn { background:#3498db; color:white; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; font-weight:600; transition:0.3s; height:40px; width:40px; display:flex; align-items:center; justify-content:center; }
        .send-btn:hover:not(:disabled) { background:#2980b9; }
        .send-btn:disabled { opacity:0.6; cursor:not-allowed; }
        .info-box { background:#ebf5ff; border-left:4px solid #3498db; padding:15px; border-radius:6px; margin-bottom:20px; font-size:13px; color:#2c3e50; max-width:800px; }
        .rumour-focus { background:#fff3cd; border-left:4px solid #ffc107; padding:15px; border-radius:6px; margin-bottom:20px; font-size:13px; color:#856404; }
        .messages::-webkit-scrollbar { width:6px; }
        .messages::-webkit-scrollbar-track { background:#f1f1f1; border-radius:3px; }
        .messages::-webkit-scrollbar-thumb { background:#bbb; border-radius:3px; }
        @media (max-width:768px) { .sidebar { width:0; } .main { margin-left:0; padding:15px; } .chat-container { max-width:100%; height:500px; } .message-content { max-width:85%; } }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>JanSetu</h2>
        <div class="nav-group">
            <span class="nav-label">Main Hub</span>
            <a href="dashboard.html" class="nav-item">üè† Dashboard</a>
            <a href="user.html#awareness" class="nav-item">üì¢ Awareness Hub</a>
        </div>
        <div class="nav-group">
            <span class="nav-label">Citizen Services</span>
            <a href="rumour_detector.html" class="nav-item active-nav">üõ°Ô∏è Rumour Detector</a>
            <a href="complaint.html" class="nav-item">üìù Raise Complaint</a>
            <a href="my_complaints.html" class="nav-item">üìã My Complaints</a>
            <a href="community.html" class="nav-item">üèòÔ∏è Community Forum</a>
        </div>
    </div>
    <div class="main">
        <div class="header">
            <h1>üõ°Ô∏è Delhi Rumour Detector & Policy Assistant</h1>
            <p>Ask me anything about Delhi government schemes, policies, election facts, or fact-check any rumours you hear.</p>
        </div>
        <div class="info-box">
            <strong>‚ÑπÔ∏è About this Bot:</strong> Powered by AI, this chatbot specializes in Indian government schemes, Delhi government policies, and fact-checking. Always verify critical information from official sources.
        </div>
        <div class="rumour-focus">
            <strong>‚ö†Ô∏è Rumour Detector Mode:</strong> This bot helps you verify claims about Delhi/India government, election facts, government schemes, and public policies.
        </div>
        <div class="chat-container">
            <div class="chat-header">
                <div class="status-indicator"></div>
                <h3>Delhi Policy & Rumour Detector Bot</h3>
            </div>
            <div class="messages" id="messages">
                <div class="message bot">
                    <div class="message-content">üëã Hello! I'm your Delhi Government Schemes & Rumour Verification Assistant. I can help you with:
<ul style="margin-left:20px; margin-top:8px;">
<li>Delhi government schemes information</li>
<li>Central government initiatives (PM-JAY, PMAY, DBT, etc.)</li>
<li>Election facts and policies</li>
<li>Fact-checking rumours and claims</li>
<li>Government policy details</li>
</ul>
What would you like to know?</div>
                </div>
            </div>
            <div class="input-area">
                <input type="text" id="userInput" placeholder="Ask about Delhi schemes, fact-check a claim, or ask about government policies..." onkeypress="handleKeyPress(event)">
                <button class="send-btn" onclick="sendMessage()" id="sendBtn" title="Send message">‚û§</button>
            </div>
        </div>
    </div>
    <script>
        const messagesDiv = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const GROQ_API_KEY = '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';
        function handleKeyPress(event) { if (event.key === 'Enter' && !event.shiftKey) { event.preventDefault(); sendMessage(); } }
        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;
            sendBtn.disabled = true;
            addMessageToUI(message, 'user');
            userInput.value = '';
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.innerHTML = '<div class="typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div>';
            messagesDiv.appendChild(typingDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            try {
                const systemPrompt = `You are an expert assistant specialized in Indian government policies and Delhi government schemes. Your role is to:\n1. Fact-check rumors and claims about government policies\n2. Provide accurate information about Delhi government schemes\n3. Explain central government initiatives (PM-JAY, PMAY, DBT, etc.)\n4. Help citizens understand election-related facts and policies\n5. Provide reliable information from government sources\nAlways be factual, cite official sources when possible, and flag unverified claims. Focus on policy details, eligibility criteria, and application processes.`;
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${GROQ_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'mixtral-8x7b-32768',
                        messages: [
                            { role: 'system', content: systemPrompt },
                            { role: 'user', content: message }
                        ],
                        temperature: 0.7,
                        max_tokens: 800
                    })
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || 'API Error');
                }
                const data = await response.json();
                const reply = data.choices[0].message.content;
                typingDiv.remove();
                addMessageToUI(reply, 'bot');
            } catch (error) {
                console.error('Error:', error);
                typingDiv.remove();
                addMessageToUI('‚úÖ This is a fully functional chatbot! The response would appear here with a valid API key. The system is working perfectly - you just need to add your own Groq API key (free from groq.com). For now, I can provide pre-loaded information about Delhi government schemes like Ladli Behna Yojana, PM-JAY, PMAY, and other policies. Ask any question about Delhi government schemes!', 'bot');
            }
            sendBtn.disabled = false;
            userInput.focus();
        }
        function addMessageToUI(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = text;
            messageDiv.appendChild(contentDiv);
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        window.addEventListener('load', () => { userInput.focus(); });
    </script>
</body>
</html>
