<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>Delhi Policy Rumour Detector</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',sans-serif;background:#f5ede3;min-height:100vh;padding:20px;}
.container{max-width:1000px;margin:0 auto;background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);overflow:hidden;}
.header{background:linear-gradient(to right,#a74432,#c41e3a);color:#fff;padding:30px;text-align:center;}
.header h1{font-size:28px;font-weight:700;margin:10px 0;}
.header p{font-size:14px;opacity:0.9;}
.content{padding:30px;}
.input-group{margin-bottom:20px;}
.input-label{font-size:16px;font-weight:600;color:#333;margin-bottom:8px;display:block;}
label{font-size:13px;color:#888;display:block;margin-bottom:10px;}
textarea{width:100%;min-height:120px;padding:12px;border:2px solid #ddd;border-radius:6px;font-size:14px;font-family:inherit;resize:vertical;}
textarea:focus{outline:none;border-color:#a74432;background:#fffbf7;}
button{width:100%;padding:14px;background:#a74432;color:#fff;border:none;border-radius:6px;font-size:15px;font-weight:600;cursor:pointer;margin-top:15px;transition:all 0.3s;}
button:hover{background:#8a3729;box-shadow:0 4px 12px rgba(167,68,50,0.25);}
button:disabled{opacity:0.6;cursor:not-allowed;}
.chat-area{margin-top:20px;background:#faf8f5;border:1px solid #ddd;border-radius:6px;min-height:300px;overflow-y:auto;padding:15px;}
.msg{margin-bottom:12px;padding:10px;border-radius:6px;font-size:13px;line-height:1.4;}
.msg.user{background:#a74432;color:#fff;text-align:right;margin-left:30%;}
.msg.bot{background:#ede9e1;color:#333;margin-right:30%;border-left:3px solid #a74432;}
.loading{display:none;text-align:center;color:#999;padding:20px;}
.loading.show{display:block;}
.spinner{display:inline-block;width:14px;height:14px;border:2px solid #ddd;border-top:2px solid #a74432;border-radius:50%;animation:spin 0.8s linear infinite;}
@keyframes spin{0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);}}
</style>
</head>
<body>
<div class='container'>
<div class='header'>
<h1>Delhi Policy Rumour Detector</h1>
<p>दिल्ली नीति अफवाह डिटेक्टर</p>
</div>
<div class='content'>
<div class='input-group'>
<label class='input-label'>Ask any question</label>
<label>कोई भी सवाल पूछें</label>
<textarea id='input' placeholder='Ask anything...'></textarea>
<button onclick='sendMsg()' id='sendBtn'>Search</button>
</div>
<div class='loading' id='loading'><div class='spinner'></div><span>Please wait...</span></div>
<div class='chat-area' id='chat'></div>
</div>
</div>
<script>
const GEMINI_API_KEY='AIzaSyBw2gp9ovaWkPTmdxb7EKDI_cF1jbhNvF0';
const GEMINI_API_URL='https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent';

function sendMsg(){
  let input=document.getElementById('input').value.trim();
  if(!input){
    alert('Please type something');
    return;
  }
  
  addMsg(input,'user');
  document.getElementById('input').value='';
  document.getElementById('loading').classList.add('show');
  document.getElementById('sendBtn').disabled=true;
  
  callGemini(input);
}

function callGemini(query){
  const payload={
    contents:[
      {
        parts:[
          {text:query}
        ]
      }
    ]
  };

  fetch(GEMINI_API_URL+'?key='+GEMINI_API_KEY,{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify(payload)
  })
  .then(resp=>resp.json())
  .then(data=>{
    document.getElementById('loading').classList.remove('show');
    document.getElementById('sendBtn').disabled=false;
    
    if(data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts[0]){
      let reply=data.candidates[0].content.parts[0].text;
      addMsg(reply,'bot');
    }
    else if(data.error){
      addMsg('Error: '+data.error.message,'bot');
    }
    else{
      addMsg('Could not get response','bot');
    }
  })
  .catch(err=>{
    document.getElementById('loading').classList.remove('show');
    document.getElementById('sendBtn').disabled=false;
    addMsg('Error: '+err.message,'bot');
  });
}

function addMsg(text,type){
  let div=document.createElement('div');
  div.className='msg '+type;
  div.textContent=text;
  document.getElementById('chat').appendChild(div);
  document.getElementById('chat').scrollTop=document.getElementById('chat').scrollHeight;
}
</script>
</body>
</html>
